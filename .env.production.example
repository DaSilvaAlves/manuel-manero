# ============================================================================
# PRODUCTION ENVIRONMENT VARIABLES TEMPLATE
# ============================================================================
# Copy this file and fill in with actual production values
# NEVER commit the actual .env.production file with real secrets
# Use GitHub Secrets for sensitive values
#
# Generated: 2026-02-17
# For Documentation: docs/DEPLOYMENT_ARCHITECTURE.md
# ============================================================================

# ============================================================================
# FRONTEND (Vercel) - apps/web/
# ============================================================================
# These variables are exposed to the browser (prefixed with NEXT_PUBLIC_)

# API Configuration
NEXT_PUBLIC_API_URL=https://manuel-manero-api.railway.app
NEXT_PUBLIC_APP_NAME=Manuel Manero
NEXT_PUBLIC_APP_DOMAIN=manuel-manero.com
NEXT_PUBLIC_ANALYTICS_ID=G-XXXXXXXXXX

# Feature Flags
NEXT_PUBLIC_ENABLE_CHAT=true
NEXT_PUBLIC_ENABLE_QUIZ=true
NEXT_PUBLIC_ENABLE_COMMUNITY=true

# Error Tracking (Sentry)
NEXT_PUBLIC_SENTRY_DSN=https://[key]@[host]/[project]
NEXT_PUBLIC_SENTRY_ENVIRONMENT=production

# ============================================================================
# BACKEND (Railway/Apps/api/) - Server-side only
# ============================================================================

# Node.js Environment
NODE_ENV=production
API_PORT=3001

# API URLs (for internal communication & CORS)
API_URL=https://manuel-manero-api.railway.app
FRONTEND_URL=https://manuel-manero.com
FRONTEND_URL_PREVIEW=https://*.manuel-manero.vercel.app

# ============================================================================
# DATABASE - Railway PostgreSQL
# ============================================================================

# Connection string (from Railway PostgreSQL service)
# Format: postgresql://user:password@host:port/database
DATABASE_URL=postgresql://postgres:CHANGE_ME@[railway-host]:5432/manuel_manero

# Direct URL for migrations (bypass connection pooling if using PgBouncer)
DIRECT_URL=postgresql://postgres:CHANGE_ME@[railway-host]:5432/manuel_manero

# ============================================================================
# AUTHENTICATION & SECURITY
# ============================================================================

# JWT Configuration
JWT_SECRET=GENERATE_32_CHAR_RANDOM_STRING_HERE_KEEP_SECURE
JWT_EXPIRY=7d

# Rate Limiting (per IP, per time window)
RATE_LIMIT_WINDOW_MS=900000       # 15 minutes
RATE_LIMIT_MAX_REQUESTS=100       # 100 requests per window
RATE_LIMIT_FORM_WINDOW_MS=3600000 # 1 hour
RATE_LIMIT_FORM_MAX=10            # 10 form submissions per hour

# CORS Configuration (set in code, these are just reference)
ALLOWED_ORIGINS=https://manuel-manero.com,https://www.manuel-manero.com

# ============================================================================
# INTEGRATIONS - CRM & EMAIL
# ============================================================================

# ActiveCampaign (CRM, leads management)
ACTIVECAMPAIGN_API_URL=https://yourinstance.api-us1.com
ACTIVECAMPAIGN_API_KEY=CHANGE_ME
ACTIVECAMPAIGN_ACCOUNT_ID=123456789

# SendGrid (Email delivery)
SENDGRID_API_KEY=CHANGE_ME
SENDGRID_FROM_EMAIL=noreply@manuel-manero.com
SENDGRID_FROM_NAME=Manuel Manero

# ============================================================================
# INTEGRATIONS - AI & LLM
# ============================================================================

# OpenAI (GPT-4 for chat, analysis)
OPENAI_API_KEY=sk-CHANGE_ME
OPENAI_MODEL=gpt-4
OPENAI_MAX_TOKENS=2000

# ============================================================================
# INTEGRATIONS - PAYMENTS & WEBHOOKS
# ============================================================================

# Hotmart (Payment processing, webhooks)
HOTMART_API_KEY=CHANGE_ME
HOTMART_WEBHOOK_SECRET=CHANGE_ME
HOTMART_SANDBOX_MODE=false

# ============================================================================
# INTEGRATIONS - ANALYTICS & MONITORING
# ============================================================================

# Sentry (Error tracking, performance monitoring)
SENTRY_DSN=https://[key]@[host]/[project]
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1           # 10% of transactions
SENTRY_REPLAYS_SESSION_SAMPLE_RATE=0.1  # 10% of sessions
SENTRY_REPLAYS_ERROR_SAMPLE_RATE=1.0    # 100% on errors

# Monitoring & Uptime
UPTIME_CHECK_INTERVAL=300000 # 5 minutes

# ============================================================================
# LOGGING & DEBUG
# ============================================================================

# Log Level: debug, info, warn, error, fatal
LOG_LEVEL=info

# Enable query logging (production: false)
LOG_DATABASE_QUERIES=false

# Enable request logging
LOG_HTTP_REQUESTS=true

# ============================================================================
# PERFORMANCE & CACHING
# ============================================================================

# Cache TTL in seconds
CACHE_TTL_CONTENT=3600      # 1 hour for content
CACHE_TTL_PROGRAMS=86400    # 24 hours for programs
CACHE_TTL_TESTIMONIALS=3600 # 1 hour for testimonials

# Max body size for API requests
MAX_REQUEST_SIZE=10mb

# ============================================================================
# OPTIONAL - Redis Caching (if using)
# ============================================================================

# Redis connection string (optional, for session/cache)
REDIS_URL=redis://user:password@host:6379

# ============================================================================
# OPTIONAL - Advanced Configuration
# ============================================================================

# Timezone
TZ=UTC

# Maximum concurrent database connections
DATABASE_MAX_CONNECTIONS=25

# Connection pool min/max
DATABASE_POOL_MIN=5
DATABASE_POOL_MAX=25

# Request timeout (ms)
REQUEST_TIMEOUT=30000

# Database query timeout (ms)
QUERY_TIMEOUT=10000

# ============================================================================
# DEPLOYMENT & VERSION TRACKING
# ============================================================================

# Version info (for debugging)
APP_VERSION=1.0.0
APP_BUILD_DATE=$(date -u +%Y-%m-%dT%H:%M:%SZ)
APP_COMMIT_SHA=

# ============================================================================
# EMERGENCY & MAINTENANCE
# ============================================================================

# Maintenance mode (if true, show maintenance page)
MAINTENANCE_MODE=false

# Emergency contact email
EMERGENCY_CONTACT=admin@manuel-manero.com

# ============================================================================
# NOTES FOR DEPLOYMENT
# ============================================================================
#
# 1. VERCEL FRONTEND ENVIRONMENT VARIABLES:
#    Set these in Vercel Dashboard → Project → Settings → Environment Variables
#    Only variables prefixed with NEXT_PUBLIC_ will be exposed to browser
#
# 2. RAILWAY BACKEND ENVIRONMENT VARIABLES:
#    Set these in Railway Dashboard → Project → Project Variables
#    All variables are available to the backend service only
#
# 3. SECRETS MANAGEMENT:
#    - Store API keys in Railway project variables
#    - Store sensitive values in GitHub Secrets for CI/CD
#    - Never commit actual .env.production file
#    - Use .env.production.example as reference template
#
# 4. GENERATING SECURE KEYS:
#
#    JWT_SECRET (32+ characters):
#    node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
#
#    Or use: https://generate-secret.vercel.app/32
#
# 5. ROTATION SCHEDULE:
#    - JWT_SECRET: Monthly
#    - API Keys (OpenAI, ActiveCampaign): Quarterly
#    - Database password: Quarterly
#    - Webhook secrets: On demand
#
# 6. DATABASE CONNECTION POOLING:
#    Using PgBouncer or similar? Update DATABASE_URL to point to pool:
#    DATABASE_URL=postgresql://user:password@pooler:6432/db
#    DIRECT_URL=postgresql://user:password@direct-db:5432/db
#
# 7. HEALTH ENDPOINT:
#    API: GET /health
#    Should return: { "status": "healthy", "database": "connected" }
#
# ============================================================================

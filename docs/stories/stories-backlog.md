# User Stories Backlog - Ecossistema Digital "UAU"

**Generated:** 2026-02-16
**Generated By:** @sm (River)
**Total Stories:** 14
**Status:** Ready for Development

---

## Epic 1.0: Frontend Foundation & Setup

### Story 1.1: Next.js Setup & Project Structure

**Status:** [ ] Draft

**Descri√ß√£o:**
Configurar Next.js 15 com TypeScript strict mode, ESLint, path aliases (@/, @components/), ambiente multi-staging (dev/staging/prod), build optimization com code splitting e lazy loading.

**Acceptance Criteria:**
- [ ] Next.js 15 configured with app router
- [ ] TypeScript strict mode enabled (`strict: true`)
- [ ] ESLint configured and passing all files
- [ ] Path aliases working (@/, @components/, @lib/, @public/)
- [ ] Environment configuration for dev/staging/prod
- [ ] Build optimization: code splitting on route changes
- [ ] Lighthouse score achievable >90
- [ ] No console errors or warnings

**Tasks/Subtasks:**
1. [ ] Initialize Next.js 15 with TypeScript template
2. [ ] Configure ESLint with Next.js plugin and TypeScript
3. [ ] Setup tsconfig.json with strict mode and path aliases
4. [ ] Create .env.example with all required variables
5. [ ] Configure next.config.ts for optimization (compression, image optimization)
6. [ ] Setup build scripts (dev, build, start)
7. [ ] Test build locally and verify no errors
8. [ ] Document setup process in README

**Dev Notes:**
- Use `npx create-next-app@latest` as base
- TypeScript strict mode: check in tsconfig.json
- Path aliases save imports: `import { Button } from '@components/Button'` instead of `../../../components/Button`
- Build optimization: Next.js handles code splitting automatically

**Testing:**
- [ ] `npm run dev` starts without errors
- [ ] `npm run build` completes successfully
- [ ] `npm run lint` passes
- [ ] Path aliases resolve correctly
- [ ] Build output analyzed (bundle size reasonable)

**Predicted Agents:** @dev
**Quality Gates:** Pre-Commit (ESLint, TypeScript strict), Pre-PR (Build performance)

---

### Story 1.2: Design System & Base Components

**Status:** [ ] Draft

**Descri√ß√£o:**
Criar design system com TailwindCSS configuration (colors: deep blue + gold, spacing, typography), componentes base reutiliz√°veis: Button, Card, Container, Badge, Alert, Input. Cada componente com accessibility attributes (WCAG 2.1).

**Acceptance Criteria:**
- [ ] TailwindCSS configured with custom colors (deep blue, gold)
- [ ] Typography scale defined (headings h1-h6, body, small)
- [ ] Button component with variants (primary, secondary, ghost)
- [ ] Card component for content blocks
- [ ] Container component for max-width layout
- [ ] Badge component for tags/labels
- [ ] Alert component for notifications
- [ ] Input component for forms
- [ ] All components accessible (semantic HTML, ARIA labels)
- [ ] Dark mode support on all components
- [ ] Components documented (props, usage examples)

**Tasks/Subtasks:**
1. [ ] Configure tailwind.config.ts with custom theme (colors, spacing, fonts)
2. [ ] Create component folder structure (src/components/)
3. [ ] Build Button component with variants and states
4. [ ] Build Card component with flexibility
5. [ ] Build Container component with max-width
6. [ ] Build Badge component (multiple colors)
7. [ ] Build Alert component (success, warning, error, info)
8. [ ] Build Input component (text, email, password)
9. [ ] Add accessibility attributes to all components
10. [ ] Document components with usage examples
11. [ ] Test dark mode toggle on all components
12. [ ] Create component library documentation

**Dev Notes:**
- Colors from PRD: Deep blue (primary), gold (accent), neutral grays
- All components must be keyboard accessible
- Dark mode: use `dark:` TailwindCSS utilities
- Component props should be TypeScript interfaces
- Export all components from `src/components/index.ts`

**Testing:**
- [ ] All components render without errors
- [ ] Dark mode works correctly
- [ ] Accessibility audit passes (semantic HTML)
- [ ] TypeScript strict mode passes
- [ ] Components responsive (mobile, tablet, desktop)

**Predicted Agents:** @dev, @ux-design-expert
**Quality Gates:** Pre-Commit (Accessibility WCAG 2.1), Pre-PR (Design consistency)

---

### Story 1.3: Layout Structure & Navigation

**Status:** [ ] Draft

**Descri√ß√£o:**
Implementar RootLayout com navbar responsivo (mobile hamburger, desktop horizontal), footer com links, theme switcher (dark/light mode), persist√™ncia de prefer√™ncia tema em localStorage.

**Acceptance Criteria:**
- [ ] RootLayout created with navbar and footer
- [ ] Navbar responsive (hamburger menu on mobile)
- [ ] Footer displays links, branding, copyright
- [ ] Dark/Light mode toggle functional
- [ ] Theme preference persists across sessions
- [ ] Navigation keyboard accessible
- [ ] Mobile-first responsive design (320px+)
- [ ] Skip to main content link present
- [ ] No layout shift during theme toggle

**Tasks/Subtasks:**
1. [ ] Create RootLayout component
2. [ ] Build Navbar component (logo, menu, CTA button)
3. [ ] Build Footer component (links, social, branding)
4. [ ] Create ThemeProvider context
5. [ ] Implement theme toggle button
6. [ ] Setup localStorage for theme persistence
7. [ ] Make navbar hamburger mobile-responsive
8. [ ] Test keyboard navigation
9. [ ] Add skip to main content link
10. [ ] Verify no layout shift on theme change
11. [ ] Test on multiple screen sizes
12. [ ] Create layout documentation

**Dev Notes:**
- Use Next.js app router (app/layout.tsx)
- Theme toggle: create React context + localStorage
- Mobile navbar: use `useState` for hamburger visibility
- Keyboard nav: ensure links focusable, close menu on Escape
- Layout shift: prevent with fixed navbar height

**Testing:**
- [ ] Navbar displays correctly on mobile and desktop
- [ ] Theme persists after page reload
- [ ] All navigation links work
- [ ] Keyboard navigation works (Tab, Enter, Escape)
- [ ] No console errors
- [ ] Responsive design passes (mobile, tablet, desktop)

**Predicted Agents:** @dev, @ux-design-expert
**Quality Gates:** Pre-Commit (Mobile responsiveness), Pre-PR (Navigation UX)

---

## Epic 2.0: Home & Core Pages

### Story 2.1: Home Page - Hero + Overview

**Status:** [ ] Draft

**Descri√ß√£o:**
Implementar home page com hero impactante (headline "Construa uma Marca Pessoal Milion√°ria", sub-headline, CTAs "Comece Agora" e "Explore Programas"), se√ß√£o "Transforma√ß√£o Entregue" com 4 blocos (Presen√ßa, Comunica√ß√£o, Escala, Abund√¢ncia), preview do ecossistema com cards PRIME/MASTERY/Comunidade.

**Acceptance Criteria:**
- [ ] Hero section with compelling headline and sub-headline
- [ ] Two main CTAs visible and clickable
- [ ] "Transforma√ß√£o Entregue" section with 4 blocks
- [ ] Ecosystem preview with PRIME, MASTERY, Comunidade cards
- [ ] Mobile-responsive hero and sections
- [ ] Images optimized (WebP, lazy loading)
- [ ] SEO meta tags (title, description, og:tags)
- [ ] Core Web Vitals: LCP <2.5s, CLS <0.1
- [ ] Lighthouse score >90

**Tasks/Subtasks:**
1. [ ] Create home page layout structure
2. [ ] Build hero section component
3. [ ] Add headline and sub-headline text
4. [ ] Create CTA buttons (Comece Agora, Explore Programas)
5. [ ] Build "Transforma√ß√£o Entregue" 4-block section
6. [ ] Create ecosystem preview cards (PRIME, MASTERY, Comunidade)
7. [ ] Optimize images (convert to WebP, lazy load)
8. [ ] Add SEO meta tags (next/head)
9. [ ] Implement responsive design (mobile-first)
10. [ ] Test Core Web Vitals
11. [ ] Test Lighthouse score
12. [ ] Add analytics tracking to CTAs

**Dev Notes:**
- Hero: use background image or video (optimize for load)
- Cards: leverage Card component from Story 1.2
- SEO: use Next.js `Metadata` API for meta tags
- Images: use Next.js `<Image>` component for optimization
- Analytics: Google Analytics 4 event tracking on CTA clicks

**Testing:**
- [ ] Page renders without errors
- [ ] All CTAs functional
- [ ] Images load quickly (lazy loading working)
- [ ] Mobile responsive (test on 320px, 768px, 1024px)
- [ ] Lighthouse >90
- [ ] LCP <2.5s, CLS <0.1
- [ ] SEO meta tags present

**Predicted Agents:** @dev, @ux-design-expert
**Quality Gates:** Pre-Commit (SEO, Accessibility), Pre-PR (Performance/Lighthouse)

---

### Story 2.2: About Page - Storytelling & Timeline

**Status:** [ ] Draft

**Descri√ß√£o:**
Implementar p√°gina Sobre com timeline interativa da hist√≥ria de Manuel (forma√ß√£o, experi√™ncia 15+ anos, papel pessoal), micro-depoimentos integrados, CTA "Agende Conversa Gratuita" com Calendly embed.

**Acceptance Criteria:**
- [ ] Timeline component interactive and responsive
- [ ] At least 5 timeline milestones displayed
- [ ] Micro-testimonials section with 3+ testimonials
- [ ] Calendly embed functional
- [ ] CTA button "Agende Conversa Gratuita" visible
- [ ] Mobile-responsive layout
- [ ] Images optimized
- [ ] Long-form content readable (font size, line height)
- [ ] Lighthouse score >90

**Tasks/Subtasks:**
1. [ ] Create About page layout
2. [ ] Build interactive timeline component
3. [ ] Add timeline content (5+ milestones)
4. [ ] Create testimonial blocks with quotes
5. [ ] Embed Calendly widget
6. [ ] Add CTA button for scheduling
7. [ ] Optimize images and content
8. [ ] Implement responsive design
9. [ ] Test Calendly integration
10. [ ] Verify long-form readability
11. [ ] Test Lighthouse score
12. [ ] Add schema markup (Person, Organization)

**Dev Notes:**
- Timeline: create interactive component with click to expand
- Calendly: embed via iframe or Calendly React component
- Long-form: ensure adequate line-height (1.6+) and font size (16px+)
- Images: optimize for web, use lazy loading
- Schema: add JSON-LD for Person/Organization markup

**Testing:**
- [ ] Timeline interactive (click/tap works)
- [ ] Testimonials display correctly
- [ ] Calendly loads and functions
- [ ] Mobile responsive
- [ ] Lighthouse >90
- [ ] No console errors
- [ ] Content readable

**Predicted Agents:** @dev, @ux-design-expert
**Quality Gates:** Pre-Commit (Interactive accessibility), Pre-PR (Content SEO)

---

### Story 2.3: Programs Page - PRIME, MASTERY, Mentorships

**Status:** [ ] Draft

**Descri√ß√£o:**
Implementar p√°gina Programas com subse√ß√µes para PRIME (iniciante), MASTERY (avan√ßado), Mentorias 1:1/Mastermind. Cada programa: Problema ‚Üí Promessa ‚Üí M√©todo ‚Üí Prova (depoimentos) ‚Üí CTA "Inscreva-se". Sugest√µes personalizadas via IA (opcional).

**Acceptance Criteria:**
- [ ] Three program sections: PRIME, MASTERY, Mentorias
- [ ] Each program has: Problem, Promise, Method, Proof sections
- [ ] Testimonial carousel for each program
- [ ] CTA button "Inscreva-se" for each program
- [ ] Program cards with key benefits
- [ ] "For Whom Is/Isn't" section for each program
- [ ] Mobile-responsive layout
- [ ] Form submission tracking
- [ ] Lighthouse score >90
- [ ] Analytics tracking on CTAs

**Tasks/Subtasks:**
1. [ ] Create Programs page layout with 3 sections
2. [ ] Build PRIME program card and content
3. [ ] Build MASTERY program card and content
4. [ ] Build Mentorias program card and content
5. [ ] Create testimonial carousel component
6. [ ] Add testimonials for each program
7. [ ] Build CTA buttons with tracking
8. [ ] Create "For Whom Is/Isn't" component
9. [ ] Design responsive grid for programs
10. [ ] Add benefits icons/list
11. [ ] Implement mobile-friendly sections
12. [ ] Test form submission tracking

**Dev Notes:**
- Use Card component for program cards
- Testimonial carousel: consider Swiper or simple state management
- CTAs: track in Google Analytics (event: `program_cta_click`)
- Benefits: use icon component + list
- Mobile: stack sections vertically, single column

**Testing:**
- [ ] All three programs display
- [ ] Testimonial carousel works
- [ ] CTAs functional and tracked
- [ ] Mobile responsive
- [ ] Lighthouse >90
- [ ] Form data captured correctly
- [ ] No console errors

**Predicted Agents:** @dev, @ux-design-expert, @architect
**Quality Gates:** Pre-Commit (Form validation, CTA tracking), Pre-PR (Conversion funnel)

---

## Epic 3.0: Backend API Foundation

### Story 3.1: Express Setup + Database Schema

**Status:** [ ] Draft

**Descri√ß√£o:**
Configurar Express.js com middleware (CORS, logging, error handling), conectar Prisma ao PostgreSQL, criar schema base (Users, Leads, Content, Programs, Testimonials), executar migrations, health check endpoint.

**Acceptance Criteria:**
- [ ] Express server running on port 3001
- [ ] CORS configured for frontend origin
- [ ] Error handling middleware implemented
- [ ] Logging middleware (morgan or similar)
- [ ] Prisma connected to PostgreSQL
- [ ] Database schema created (Users, Leads, Content, Programs, Testimonials)
- [ ] Migrations generated and tested
- [ ] Health check endpoint (GET /api/health) working
- [ ] Environment variables configured (.env.local)
- [ ] TypeScript strict mode enabled
- [ ] Database seed script created (optional)

**Tasks/Subtasks:**
1. [ ] Initialize Express.js project with TypeScript
2. [ ] Install dependencies (express, prisma, cors, dotenv, etc)
3. [ ] Create Express app with middleware setup
4. [ ] Configure CORS for frontend
5. [ ] Add error handling middleware
6. [ ] Add logging middleware
7. [ ] Setup Prisma (init, schema.prisma)
8. [ ] Connect to PostgreSQL database
9. [ ] Create Prisma schema (models: User, Lead, Content, Program, Testimonial)
10. [ ] Generate and run migrations
11. [ ] Create health check endpoint
12. [ ] Test database connectivity
13. [ ] Create .env.example
14. [ ] Document setup process

**Dev Notes:**
- Use Vercel Postgres for production database
- Prisma schema should include relationships (User ‚Üí Leads, Programs ‚Üí Testimonials)
- Migrations: always reversible (`prisma migrate dev`)
- Health check: simple endpoint that queries database

**Testing:**
- [ ] Express starts without errors
- [ ] CORS working (frontend can call API)
- [ ] Database connection established
- [ ] Migrations run successfully
- [ ] Health check endpoint responds
- [ ] TypeScript compiles without errors
- [ ] No hardcoded credentials

**Predicted Agents:** @dev, @data-architect, @architect
**Quality Gates:** Pre-Commit (Schema validation, migration reversibility), Pre-PR (Database compatibility)

---

### Story 3.2: Content APIs (GET endpoints)

**Status:** [ ] Draft

**Descri√ß√£o:**
Implementar endpoints GET para recuperar conte√∫dos: GET /api/articles, GET /api/articles/:id, GET /api/testimonials, GET /api/programs. Incluir filtros, pagination, valida√ß√£o, error handling.

**Acceptance Criteria:**
- [ ] GET /api/articles endpoint working
- [ ] GET /api/articles/:id endpoint working
- [ ] GET /api/testimonials endpoint working
- [ ] GET /api/programs endpoint working
- [ ] Pagination implemented (limit, offset)
- [ ] Filtering by category (optional)
- [ ] Input validation (Zod)
- [ ] Error responses consistent (4xx, 5xx)
- [ ] Query optimization (no N+1 queries)
- [ ] API documentation (comments or Swagger)
- [ ] Response time <200ms

**Tasks/Subtasks:**
1. [ ] Create routes/articles.ts endpoint
2. [ ] Create routes/testimonials.ts endpoint
3. [ ] Create routes/programs.ts endpoint
4. [ ] Implement pagination logic
5. [ ] Add Zod validation for query params
6. [ ] Implement error handling
7. [ ] Test query performance
8. [ ] Add database indexes if needed
9. [ ] Create API response schema
10. [ ] Document API endpoints (comments)
11. [ ] Test all endpoints with Postman/curl
12. [ ] Verify response times

**Dev Notes:**
- Use Zod for query validation: `const schema = z.object({ limit: z.number(), offset: z.number() })`
- Pagination: `select: { skip: offset, take: limit }`
- Error responses: consistent format `{ error: string, status: number }`
- Performance: add Prisma `.select()` to only fetch needed fields

**Testing:**
- [ ] All endpoints return 200 OK
- [ ] Pagination working (limit, offset)
- [ ] Invalid queries return 400 Bad Request
- [ ] Response time <200ms
- [ ] Correct number of results
- [ ] No N+1 queries (check database logs)

**Predicted Agents:** @dev, @architect
**Quality Gates:** Pre-Commit (Input validation, SQL injection prevention), Pre-PR (API contract)

---

### Story 3.3: Lead Capture & CRM Integration

**Status:** [x] In Progress (Core implementation 90% complete)

**Descri√ß√£o:**
Implementar POST /api/leads para capturar leads (email, name, programa preferido), integra√ß√£o ActiveCampaign para auto-add a CRM com tagging, valida√ß√£o de email, rate limiting, webhook para eventos (form submission).

**Acceptance Criteria:**
- [x] POST /api/leads endpoint working
- [x] Lead data validated (email format, required fields)
- [x] Rate limiting implemented (max 10 requests/minute per IP)
- [x] ActiveCampaign integration functional
- [x] Leads added to CRM with correct tags
- [x] Email validation via regex
- [x] GDPR-compliant data storage
- [x] Error responses clear
- [x] No hardcoded API keys (use .env)
- [ ] Webhook logging for debugging (pending - requires DB setup)

**Tasks/Subtasks:**
1. [x] Create POST /api/leads endpoint
2. [x] Add Zod validation schema
3. [x] Implement rate limiting middleware
4. [x] Setup ActiveCampaign API client
5. [x] Create function to add lead to ActiveCampaign
6. [x] Implement email validation
7. [x] Add GDPR consent field
8. [x] Create lead logging (console logging)
9. [ ] Test with actual ActiveCampaign sandbox (requires .env setup)
10. [x] Handle ActiveCampaign API errors
11. [x] Document API endpoint (JSDoc comments added)
12. [ ] Test end-to-end (form ‚Üí lead ‚Üí CRM) (requires DB + frontend)

**File List (Created/Modified):**
- ‚úÖ `apps/api/src/validation.ts` - Added createLeadSchema with Zod
- ‚úÖ `apps/api/src/services/activecampaign.ts` - NEW - ActiveCampaign API client
- ‚úÖ `apps/api/src/routes/leads.ts` - NEW - POST /api/leads endpoint
- ‚úÖ `apps/api/src/index.ts` - Registered leads route + updated API docs
- ‚úÖ `apps/api/package.json` - Added express-rate-limit (7.1.5)

**Dev Notes:**
- Rate limiting: ‚úÖ express-rate-limit configured (10 req/min per IP)
- ActiveCampaign: ‚úÖ REST API client with contact upsert & tagging
- Email validation: ‚úÖ Zod .email() with custom error message
- GDPR: ‚úÖ stored as boolean with timestamp in data JSON
- Error handling: ‚úÖ graceful failures for AC API down/misconfigured
- Fire-and-forget: ‚úÖ AC sync is non-blocking via setImmediate()

**Testing:**
- [ ] POST /api/leads creates lead
- [ ] Lead appears in ActiveCampaign
- [ ] Rate limiting blocks excessive requests
- [ ] Invalid emails rejected
- [ ] Valid emails accepted
- [ ] Error responses clear
- [ ] No API keys in logs

**Predicted Agents:** @dev, @architect
**Quality Gates:** Pre-Commit (GDPR compliance, no hardcoded secrets), Pre-PR (Integration security)

---

## Epic 4.0: Community & Checkout Integration

### Story 4.1: Community Page - Sales & Social Proof

**Status:** [ ] Draft

**Descri√ß√£o:**
Implementar p√°gina Comunidade Milion√°ria com manifesto (purpose-driven community), se√ß√£o benef√≠cios (lives, networking, recursos IA-personalizados), "Para Quem √â/N√£o √â", depoimentos v√≠deo, CTA "Entre na Comunidade" com UTM tracking para Hotmart.

**Acceptance Criteria:**
- [ ] Community page displays manifesto
- [ ] Benefits section with 4+ benefits listed
- [ ] "For Whom Is/Isn't" section present
- [ ] Video testimonials carousel
- [ ] Main CTA "Entre na Comunidade" visible
- [ ] UTM parameters added to Hotmart link
- [ ] CTA tracking in Google Analytics
- [ ] Mobile-responsive layout
- [ ] Lighthouse score >90
- [ ] Link to Hotmart functional

**Tasks/Subtasks:**
1. [ ] Create Community page layout
2. [ ] Add manifesto section
3. [ ] Build benefits grid/list
4. [ ] Create "For Whom Is/Isn't" component
5. [ ] Implement video testimonial carousel
6. [ ] Create main CTA button
7. [ ] Add UTM parameters to Hotmart link
8. [ ] Setup Google Analytics event tracking
9. [ ] Test Hotmart link
10. [ ] Implement responsive design
11. [ ] Test Lighthouse score
12. [ ] Add schema markup (SoftwareApplication or similar)

**Dev Notes:**
- Benefits: use icon + description format
- Video testimonials: embed YouTube/Vimeo videos
- UTM: `?utm_source=manuel-manero&utm_medium=web&utm_campaign=community`
- CTA tracking: GA4 event `community_cta_click`
- Mobile: stack sections vertically

**Testing:**
- [ ] All benefits display
- [ ] Video testimonials play
- [ ] Hotmart link works with UTM params
- [ ] CTA tracked in GA4
- [ ] Mobile responsive
- [ ] Lighthouse >90
- [ ] No broken links

**Predicted Agents:** @dev, @ux-design-expert
**Quality Gates:** Pre-Commit (Video optimization, CTA tracking), Pre-PR (Conversion funnel)

---

### Story 4.2: Hotmart Integration & Webhooks

**Status:** [ ] Draft

**Descri√ß√£o:**
Integrar Hotmart API para webhook handling (purchase.completed, subscription.active, refund, etc), POST endpoint para recepcionar webhooks, validar assinatura Hotmart, atualizar lead status em database, rastreamento de convers√£o.

**Acceptance Criteria:**
- [ ] POST /api/webhooks/hotmart endpoint working
- [ ] Hotmart webhook signature validated (HMAC)
- [ ] Webhook events processed (purchase, subscription, refund)
- [ ] Lead status updated in database
- [ ] Idempotency handled (duplicate webhooks)
- [ ] Error logging for failed webhooks
- [ ] Webhook retry logic implemented
- [ ] No Hotmart credentials hardcoded
- [ ] Webhook testing documented

**Tasks/Subtasks:**
1. [ ] Create POST /api/webhooks/hotmart endpoint
2. [ ] Implement Hotmart signature validation
3. [ ] Create webhook event handler
4. [ ] Implement purchase.completed handler
5. [ ] Implement subscription.active handler
6. [ ] Implement refund handler
7. [ ] Add idempotency check (store processed webhook IDs)
8. [ ] Create error logging
9. [ ] Implement retry logic
10. [ ] Test with Hotmart sandbox
11. [ ] Document webhook events
12. [ ] Create monitoring alerts

**Dev Notes:**
- Hotmart signature: HMAC-SHA256 validation
- Webhook body: store raw body for signature validation
- Idempotency: store webhook ID in database, check before processing
- Lead status: update `paid_at` timestamp when purchase detected
- Logging: log all webhook events for audit trail

**Testing:**
- [ ] Webhook endpoint receives Hotmart events
- [ ] Signature validation passes
- [ ] Lead status updated correctly
- [ ] Duplicate webhooks handled (idempotency)
- [ ] Error events logged
- [ ] Retry logic works
- [ ] No console errors

**Predicted Agents:** @dev, @architect
**Quality Gates:** Pre-Commit (Security validation, signature verification), Pre-PR (Integration safety)

---

## Epic 5.0: IA Features & Optimization

### Story 5.1: Chat IA Assistente

**Status:** [ ] Draft

**Descri√ß√£o:**
Implementar chat widget com OpenAI GPT-4, context sobre Manuel e programas, responde perguntas sobre marca pessoal, sugere programa ideal baseado em conversa.

**Acceptance Criteria:**
- [ ] Chat widget visible on pages
- [ ] OpenAI API integration working
- [ ] Chat history maintained in conversation
- [ ] Context about Manuel and programs provided to AI
- [ ] Response time <3 seconds
- [ ] Error handling for API failures
- [ ] Rate limiting implemented
- [ ] No API keys exposed in frontend
- [ ] Mobile-responsive chat UI
- [ ] Chat can be minimized/closed

**Tasks/Subtasks:**
1. [ ] Create chat widget component
2. [ ] Setup OpenAI API client (backend)
3. [ ] Create chat API endpoint (POST /api/chat)
4. [ ] Implement message history state management
5. [ ] Add context/prompt about Manuel and programs
6. [ ] Create chat UI (messages, input, send button)
7. [ ] Implement error handling
8. [ ] Add rate limiting
9. [ ] Test response quality
10. [ ] Optimize token usage
11. [ ] Test on mobile devices
12. [ ] Create chat documentation

**Dev Notes:**
- OpenAI: use gpt-4 model via API
- Context: provide system prompt with Manuel's info and programs
- Frontend chat: store only frontend, backend processes with OpenAI
- Rate limiting: max 20 messages per user per hour
- Error: graceful fallback if OpenAI down

**Testing:**
- [ ] Chat widget renders
- [ ] Messages send and receive
- [ ] Response time <3s
- [ ] Chat history preserved
- [ ] Rate limiting works
- [ ] Error messages helpful
- [ ] Mobile responsive
- [ ] No API keys in frontend

**Predicted Agents:** @dev, @architect
**Quality Gates:** Pre-Commit (API key security, prompt injection prevention), Pre-PR (Integration test)

---

### Story 5.2: Assessment Quiz - Personalized Recommendations

**Status:** [ ] Draft

**Descri√ß√£o:**
Criar quiz interativo (5-7 quest√µes) sobre objetivo, n√≠vel experi√™ncia, desafios, com IA para processar respostas e recomendar programa ideal (PRIME para iniciante, MASTERY para avan√ßado). Resultado captura lead via email.

**Acceptance Criteria:**
- [ ] Quiz component with 5-7 questions
- [ ] Multiple choice questions with clear options
- [ ] Quiz progress indicator
- [ ] Result page with personalized recommendation
- [ ] AI-powered recommendation logic
- [ ] Email capture on result
- [ ] Lead saved to database
- [ ] Email sent via ActiveCampaign
- [ ] Mobile-responsive quiz
- [ ] Results shareable

**Tasks/Subtasks:**
1. [ ] Create Quiz component
2. [ ] Add 5-7 questions with options
3. [ ] Implement progress tracking
4. [ ] Create result calculation logic
5. [ ] Build result page component
6. [ ] Create recommendation text (PRIME/MASTERY)
7. [ ] Add email capture form
8. [ ] Save lead on result
9. [ ] Send email via ActiveCampaign
10. [ ] Test AI recommendation accuracy
11. [ ] Implement mobile responsiveness
12. [ ] Add analytics tracking to quiz

**Dev Notes:**
- Quiz questions: user-friendly language, clear options
- Recommendation logic: score based on answers
- Email: capture optional (can recommend without email)
- ActiveCampaign: add quiz result as custom field
- Analytics: track quiz completion rate

**Testing:**
- [ ] All questions display correctly
- [ ] Progress indicator works
- [ ] Recommendation generated
- [ ] Email captured
- [ ] Lead saved to database
- [ ] Email sent
- [ ] Mobile responsive
- [ ] Quiz completes without errors

**Predicted Agents:** @dev, @ux-design-expert
**Quality Gates:** Pre-Commit (Form validation, lead capture), Pre-PR (AI logic test)

---

### Story 5.3: Performance & SEO Optimization

**Status:** [ ] Draft

**Descri√ß√£o:**
Aplicar image optimization (WebP, lazy loading), code splitting (dynamic imports), caching strategy (Redis para APIs), minification, tree-shaking, prefetching, Google Page Speed otimizado, SEO meta tags din√¢micos.

**Acceptance Criteria:**
- [ ] All images converted to WebP with fallbacks
- [ ] Lazy loading implemented on images
- [ ] Code splitting on route changes
- [ ] Dynamic imports for heavy components
- [ ] Browser caching configured
- [ ] Redis caching for API responses
- [ ] CSS/JS minified
- [ ] Tree-shaking enabled
- [ ] Lighthouse score >90 all pages
- [ ] Core Web Vitals: LCP <2.5s, FID <100ms, CLS <0.1
- [ ] SEO meta tags dynamically generated
- [ ] Structured data (JSON-LD) added

**Tasks/Subtasks:**
1. [ ] Convert images to WebP format
2. [ ] Implement lazy loading on images
3. [ ] Setup code splitting in Next.js
4. [ ] Create dynamic imports for components
5. [ ] Configure browser caching headers
6. [ ] Setup Redis caching for APIs
7. [ ] Minify CSS and JavaScript
8. [ ] Enable tree-shaking in build
9. [ ] Setup prefetching for critical resources
10. [ ] Test Lighthouse on all pages
11. [ ] Optimize Core Web Vitals
12. [ ] Add dynamic meta tags per page
13. [ ] Add JSON-LD structured data
14. [ ] Monitor performance with tools

**Dev Notes:**
- Images: use Next.js `<Image>` component
- Code splitting: Next.js does this automatically
- Caching: set appropriate max-age headers
- Redis: cache GET endpoints for 5-10 minutes
- SEO: use Next.js Metadata API for dynamic tags

**Testing:**
- [ ] Lighthouse >90 on all pages
- [ ] LCP <2.5s
- [ ] FID <100ms
- [ ] CLS <0.1
- [ ] Images load quickly
- [ ] Code splitting working (DevTools)
- [ ] No console errors
- [ ] Meta tags present in HTML

**Predicted Agents:** @dev, @architect
**Quality Gates:** Pre-Commit (Bundle size analysis), Pre-PR (Lighthouse audit >90)

---

## Summary Statistics

| Epic | Stories | Total Subtasks |
|------|---------|----------------|
| 1.0 | 3 | 32 |
| 2.0 | 3 | 35 |
| 3.0 | 3 | 32 |
| 4.0 | 2 | 22 |
| 5.0 | 3 | 38 |
| **TOTAL** | **14** | **159** |

---

## Next Steps

1. ‚úÖ Stories created and documented
2. ‚Üí @dev begins with Story 1.1 (Next.js Setup)
3. ‚Üí Create local feature branch: `git checkout -b feature/1.1-nextjs-setup`
4. ‚Üí Implement according to story tasks
5. ‚Üí Run tests and quality checks
6. ‚Üí Mark story complete when all criteria met
7. ‚Üí Move to next story (1.2, 1.3, etc)

---

**All stories ready for development!** üåä

‚Äî River, facilitando o flow üåä
